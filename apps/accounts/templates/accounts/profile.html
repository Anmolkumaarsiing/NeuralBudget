{% extends 'core/base.html' %}
{% load static %}

{% block title %}My Profile{% endblock %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'accounts/css/profile.css' %}">
{% endblock %}

{% block extra_js %}
    <script type="module" src="{% static 'accounts/js/profile.js' %}"></script>
{% endblock %}

{% block content %}
<main class="profile-main">
    <!-- Sidebar -->
    <aside class="profile-sidebar">
        <div class="profile-header">
            <div class="profile-pic-container">
                <img src="{{ profile.photo_url }}" alt="Profile Picture" class="profile-pic" id="profileImage">
                <div class="profile-pic-edit" id="editProfilePic">
                    <i class="fas fa-camera"></i>
                    <input type="file" id="profilePicUpload" accept="image/*" style="display: none;">
                </div>
            </div>
            <h2 class="profile-name" id="profileName">{{ full_name }}</h2>
            <div class="profile-email-truncate" id="profileEmail">{{ profile.email }}</div>
            <div class="member-since">Member since {{ profile.created_at|date:"F Y" }}</div>
        </div>

        <div class="financial-score">
            <div class="score-label">Financial Health Score</div>
            <div class="score-value">82</div>
            <div class="score-label">Excellent</div>
        </div>

    </aside>

    <!-- Main Content -->
    <div class="profile-content">
        <h2 class="section-title">
            Personal Information
            <button class="edit-toggle" id="editToggle">
                <i class="fas fa-edit"></i> Edit Profile
            </button>
        </h2>
        
        <form id="profileForm">
            <div class="form-group">
                <label for="first-name">First Name</label>
                <input type="text" id="first-name" value="{{ profile.first_name|default:'' }}" disabled>
            </div>
            
            <div class="form-group">
                <label for="last-name">Last Name</label>
                <input type="text" id="last-name" value="{{ profile.last_name|default:'' }}" disabled>
            </div>

            <div class="form-group">
                <label for="email">Email Address</label>
                <input type="email" id="email" value="{{ profile.email }}" disabled>
            </div>

            <div class="form-group">
                <label for="phone">Phone Number</label>
                <input type="tel" id="phone" value="{{ profile.phone_number|default:'' }}" disabled>
            </div>

            <div class="form-group">
                <label for="dob">Date of Birth</label>
                <input type="date" id="dob" value="{{ profile.date_of_birth|date:'Y-m-d'|default:'' }}" disabled>
            </div>

            <div class="form-group">
                <label for="goals">Financial Goals</label>
                <textarea id="goals" disabled>{{ profile.financial_goals|default:'' }}</textarea>
            </div>

            <div class="form-group">
                <label for="risk">Risk Tolerance</label>
                <input type="range" id="risk" min="1" max="10" value="{{ profile.risk_tolerance|default:5 }}" class="risk-slider" disabled>
                <div class="risk-labels">
                    <span>Conservative</span>
                    <span>Balanced</span>
                    <span>Aggressive</span>
                </div>
            </div>

            <div class="form-actions" style="display: none;">
                <button type="button" class="btn btn-cancel" id="cancelEdit">Cancel</button>
                <button type="submit" class="btn btn-save">Save Changes</button>
            </div>
        </form>
    </div>
</main>
{% endblock %}