{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Neural Budget AI - Dashboard</title>
    <link rel="stylesheet" href="{% static 'home/css/dashboard.css' %}">
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

</head>
<body>

<div class="dashboard-container">
    
    <!-- SideBar Section -->

    <aside class="sidebar">
        <div class="logo">
            <h2>Neural Budget AI</h2>
        </div>
        <ul class="nav-links">
            <li><a href="{% url 'dashboard' %}"><i class="fas fa-home"></i> Dashboard</a></li>
            <li><a href="{% url 'add_transaction' %}"><i class="fas fa-plus-circle"></i> Add Transaction</a></li>
            <li class="active"><a href="{% url 'income_tracker' %}"><i class="fas fa-money-bill-wave"></i> Income Tracker</a></li>
            <li><a href="#"><i class="fas fa-shopping-cart"></i> Expense Manager</a></li>
            <li><a href="#"><i class="fas fa-lightbulb"></i> Smart Insights</a></li>
            <li><a href="#"><i class="fas fa-wallet"></i> Budget Planner</a></li>
            <li><a href="#"><i class="fas fa-robot"></i> AI Assistance</a></li>
            <li><a href="#"><i class="fas fa-user"></i> Profile</a></li>
            <li><a href="{% url 'logout' %}"><i class="fas fa-sign-out-alt"></i> Sign Out</a></li>
        </ul>        
        
    </aside>
    
    <!-- TopBar Section -->

    <main class="main-content">
        <header class="topbar">
            <div class="greeting">
                <h3>Hi, <span id="username">{{ user.username }}</span> ðŸ‘‹</h3>
            </div>
            <div class="actions">
                <label class="switch">
                    <input type="checkbox" id="darkModeToggle">
                    <span class="slider round"></span>
                </label>
            </div>
        </header>
        
    <!-- Income Tracker Section -->

<!-- Section 1: Add Income -->
<section class="add-income">
    <h2>Add Income</h2>
    <form method="POST" action="">
        {% csrf_token %}

        <label for="source">Income Source:</label>
        <select id="source" name="source" required onchange="toggleCustomInput()">
            <option value="Salary">Salary</option>
            <option value="Freelancing">Freelancing</option>
            <option value="Business">Business</option>
            <option value="Investments">Investments</option>
            <option value="Other">Other</option>
        </select>

        <!-- Custom income input field (hidden by default) -->
        <input type="text" id="customIncome" name="customIncome" placeholder="Enter Income Source" style="display:none;">

        <label for="amount">Amount:</label>
        <input type="number" id="amount" name="amount" required>

        <label for="date">Date:</label>
        <input type="date" id="date" name="date" required>

        <label for="status">Status:</label>
        <select id="status" name="status" required>
            <option value="Received">Received</option>
            <option value="Pending">Pending</option>
            <option value="Failed">Failed</option>
        </select>

        <button type="submit">Add Income</button>
    </form>
</section>

<!-- Section 2: Track Income -->
<section class="track-income">
    <h2>Track Income</h2>
    <table>
        <thead>
            <tr>
                <th>Source</th>
                <th>Amount</th>
                <th>Date</th>
                <th>Status</th>
            </tr>
        </thead>
        <tbody>
            {% for income in incomes %}
            <tr>
                <td>{{ income.source }}</td>
                <td>â‚¹{{ income.amount }}</td>
                <td>{{ income.date }}</td>
                <td class="status-{{ income.status|lower|slugify }}">{{ income.status }}</td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4">No income records found.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<script>
    function toggleCustomInput() {
        var source = document.getElementById("source");
        var customIncome = document.getElementById("customIncome");
        if (source.value === "Other") {
            customIncome.style.display = "block";
            customIncome.setAttribute("required", "required");
        } else {
            customIncome.style.display = "none";
            customIncome.removeAttribute("required");
        }
    }
</script>
    

    </main>

    <!-- Dark Mode Section -->

    <script>
        document.getElementById("darkModeToggle").addEventListener("change", function() {
            document.body.classList.toggle("dark-mode");
        });
    </script>

</div>
</body>
</html>
